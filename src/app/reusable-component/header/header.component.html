<header id="user" *ngIf="showUserSection">
  <app-loader *ngIf="isLoading"></app-loader>
  <div class="container">
    <div class="row justify-content-center" id="user">
      <div class="upper-header d-flex">
        <div class="logo">
          <a>
            <h2>Seasia</h2>
          </a>
        </div>
        <div class="header-menu d-flex justify-content-end align-items-center">
          <div class="cart d-flex justify-content-end">
            <button class="btn btn-primary d-flex " type="button" data-bs-toggle="offcanvas"
              class="bg-transparent btn-outline-light border-0" (click)="openEnd(content)" [disabled]="!hasToken">
              <i class="fa fa-shopping-cart position-absolute" aria-hidden="true"></i>
              <span class="badge badge-danger position-relative item-counter">
                {{ cartItemCount > 0 ? cartItemCount : 0 }}
              </span>
            </button>
          </div>
          <div class="login d-flex justify-content-end">
            <div class="dropdown" *ngIf="hasToken">
              <button class="btn btn-secondary rounded-pill btn btn-primary rounded-pill dropdown-toggle profile-button"
                type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                <span>
                  {{userProfileDetails.FirstName}}
                </span>
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                <li *ngIf="isAdmin">
                  <a class="dropdown-item" [routerLink]="['/admin/dashboard']"
                    routerLinkActive="router-link-active">Admin
                    Panel</a>
                </li>
                <!-- <li>
                    <a class="dropdown-item disabled-link">Wallet Balance:{{wallet | currency:'INR' }}</a>
                  </li> -->
                <li>
                  <a class="dropdown-item disabled-link">Pending Balance: {{ userProfileInfo?.balance | currency:'INR'
                    }}</a>
                </li>


                <li><a class="dropdown-item" (click)="logout()">Logout</a></li>
              </ul>
            </div>
            <button *ngIf="!hasToken" (click)="openLoginModal($event)" class="rounded-pill btn btn-primary rounded-pill"
              data-toggle="modal" data-target="#loginModal">Login</button>
            <!-- <button (click)="openLoginModal($event)">Login</button> -->

          </div>
        </div>
      </div>
      <div class="lower-header d-flex">
        <div class="left-text d-flex flex-column justify-content-center align-items-center">
          <div>
            <div>
              <h2><span class="black-text">Eat</span> <span class="purple-text">Fresh</span></h2>
            </div>
            <div class="mb-5">
              <h3>Stay Young</h3>
            </div>
            <div class="mb-1">
              <button (click)="scrollToHomeSection()">Order Now</button>
            </div>
          </div>
        </div>
        <div class="right-images d-flex align-items-center">
          <div class="left-image">
            <div>
              <img src="assets/image 3.png" alt="nimbu-panni">
            </div>
          </div>
          <div class="middle-image">
            <div>
              <img src="assets/image 4.png" alt="aunty">
            </div>
          </div>
          <div class="right-image">
            <div>
              <img src="assets/image 1.png" alt="burger">
            </div>
          </div>
        </div>
      </div>
      <div class="sidebar">
        <ng-template #content let-offcanvas>
          <div class="custom-offcanvas-content">
            <div class="offcanvas-header">
              <h4 class="offcanvas-title">Order Details</h4>
              <button type="button" (click)="closeCanvas()">
                <img src="assets/close-circle-svgrepo-com (2) 1.png" alt="close button">
              </button>
            </div>
            <div class="offcanvas-body" *ngIf="cartItems.length > 0; else emptyCart">
              <div *ngFor="let item of cartItems; let $index = index"
                class="d-flex justify-content-between align-items-center item-info-body">
                <div class="item-name-info">
                  <p>{{ item.item_name }} </p>
                </div>
                <div class="d-flex quantity-button align-items-center">
                  <p> Qty.</p>
                  <button (click)="decreaseQuantity($index)">-</button>
                  <input class="text-center" [(ngModel)]="cartItems[$index].quantity" [disabled]="!quantity"
                    type="number" min="1">
                  <button (click)="increaseQuantity($index)">+</button>
                </div>
                <div>
                  <p style="width: 85px;"> {{ item.price | currency:'INR' }}</p>
                </div>
                <button (click)="deleteItem($index)" class=""><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
              <div class="d-flex justify-content-end align-items-center item-info-body">
                <div class="item-name-info" style="width: 41%;">
                  <p> Total: {{ getTotalBalance() | currency:'INR' }}</p>
                </div>
              </div>
              <div class="text-end d-flex">
                <button (click)="confirmOrder()" class="confirm-button" [disabled]="!hasCartItems">
                  Confirm Order
                </button>

                <!-- <div ngbDropdown class="d-inline-block">
                  <button type="button" class="cancel-button" id="dropdownBasic1" ngbDropdownToggle>
                    Bill Status: {{ selectedBillStatus }}
                  </button>
                  <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                    <button (click)="setBillStatus('paid')" ngbDropdownItem>Paid</button>
                    <button (click)="setBillStatus('unpaid')" ngbDropdownItem>Unpaid</button>
                  </div>
                </div> -->
              </div>
            </div>
            <ng-template #emptyCart>
              <div class="empty-cart-message text-center">
                <p>
                  No Items Found In The Cart
                </p>
              </div>
            </ng-template>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</header>